<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>在线HTML源码显示效果左右分栏显示</title>
    <link href="../../assets/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .html-source,
        #htmlView {
            height: 500px;
            border: 1px solid #ddd;
        }

        #textArea {
            width: 100%;
            height: 100%;
            border: none;
            resize: none;
        }

    </style>
    <script src="../../assets/lib/jquery/jquery.min.js" type="text/javascript"></script>
</head>

<body>
    <div class="container">
        <hr>
        <div class="text-center">
            <div class="btn btn-default submit">提交</div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <h4>源码</h4>
                <div class="html-source" contenteditable="false">
                    <textarea id="textArea"></textarea>
                </div>
            </div>
            <div class="col-md-6">
                <h4>预览</h4>
                <div id="htmlView"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function do_submit() {
            var frame = document.createElement('iframe')
            frame.width = '100%'
            frame.height = '100%'
            frame.frameBorder = 'none'
            htmlView.innerHTML = ''
            htmlView.appendChild(frame)
            // $('#html-view').html('').append(frame)
            var frame = frame.contentWindow ? frame.contentWindow : frame.contentDocument.document ? frame.contentDocument.document : frame.contentDocument
            frame.document.open()
            frame.document.write(textArea.value)
            frame.document.close()
        }
        $('.submit').click(do_submit)
        // 首次打开时，显示演示内容
        $(function () {
            $.get('demo.html').success(function (res) {
                textArea.innerHTML = res
                $('.submit').click()
            })
        })

    </script>
</body>

</html>
