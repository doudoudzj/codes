<html>

<head>
  <title>等比例缩放图片</title>
  <script>
    function DrawImage(ImgD, iwidth, iheight) {
      //参数(原图片,允许的宽度,允许的高度)
      var image = new Image();
      image.src = ImgD.src;
      if (image.width > 0 && image.height > 0) {
        if (image.width / image.height >= iwidth / iheight) {
          if (image.width > iwidth) {
            ImgD.width = iwidth;
            ImgD.height = (image.height * iwidth) / image.width;
          } else {
            // 不超过最大值
            // ImgD.width = image.width;
            // ImgD.height = image.height;
            // 等比例
            ImgD.width = (image.width * iheight) / image.height
            ImgD.height = iheight;
          }
        } else {
          if (image.height > iheight) {
            ImgD.width = (image.width * iheight) / image.height;
            ImgD.height = iheight;
          } else {
            // 不超过最大值
            // ImgD.width = image.width;
            // ImgD.height = image.height;
            // 等比例
            ImgD.width = iwidth
            ImgD.height = (image.height * iwidth) / image.width
          }
        }
      }
    }
  </script>
</head>

<body>
  <div style="height: 100px;">
    <img src="img/test.png" alt="自动缩放后的效果" width="100" height="100" />
  </div>
  <button onclick="javascript:DrawImage(document.querySelector('img'),180,80)">宽度,180,80</button><br />
  <button onclick="javascript:DrawImage(document.querySelector('img'),200,80)">宽度200,80</button><br />
  <button onclick="javascript:DrawImage(document.querySelector('img'),200,80)">宽度200,180</button><br />
  <button onclick="javascript:DrawImage(document.querySelector('img'),250,80)">宽度,250,180</button><br />
</body>

</html>